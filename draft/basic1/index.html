<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.22
    </script>
    <title>MySQL基础1</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="/">MySQL手册</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/basic">基础知识</a><a aria-current="page" class="active" href="/draft">草稿箱</a><a href="/wiki">Wiki</a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="/"></a><h1>MySQL手册</h1><p>MySQL手册</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/basic">基础知识</a></li><li><a aria-current="page" class="active" href="/draft">草稿箱</a></li><li><a href="/wiki">Wiki</a></li></ul></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/draft/basic1">MySQL基础1</a></li><li><a href="/draft/basic2">MySQL基础2</a></li><li><a href="/draft/basic3">MySQL基础3</a></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="1. 数据库能够做什么" data-depth="2" class=""><a href="/draft/basic1#1-数据库能够做什么"><span>1. 数据库能够做什么</span></a></li><li title="2. 数据库的基本概念" data-depth="2" class=""><a href="/draft/basic1#2-数据库的基本概念"><span>2. 数据库的基本概念</span></a></li><li title="2.1 实体" data-depth="3" class=""><a href="/draft/basic1#21-实体"><span>2.1 实体</span></a></li><li title="2.2 数据库(DB)" data-depth="3" class=""><a href="/draft/basic1#22-数据库db"><span>2.2 数据库(DB)</span></a></li><li title="2.3 数据库管理系统(DBMS)" data-depth="3" class=""><a href="/draft/basic1#23-数据库管理系统dbms"><span>2.3 数据库管理系统(DBMS)</span></a></li><li title="2.4 SQL" data-depth="3" class=""><a href="/draft/basic1#24-sql"><span>2.4 SQL</span></a></li><li title="2.5 SQL规范" data-depth="3" class=""><a href="/draft/basic1#25-sql规范"><span>2.5 SQL规范</span></a></li><li title="3. 数据表" data-depth="2" class=""><a href="/draft/basic1#3-数据表"><span>3. 数据表</span></a></li><li title="4.MYSQL简介" data-depth="2" class=""><a href="/draft/basic1#4mysql简介"><span>4.MYSQL简介</span></a></li><li title="4.1 MYSQL特点" data-depth="3" class=""><a href="/draft/basic1#41-mysql特点"><span>4.1 MYSQL特点</span></a></li><li title="4.2 MYSQL安装" data-depth="3" class=""><a href="/draft/basic1#42-mysql安装"><span>4.2 MYSQL安装</span></a></li><li title="4.3 MYSQL配置" data-depth="3" class=""><a href="/draft/basic1#43-mysql配置"><span>4.3 MYSQL配置</span></a></li><li title="4.4 MYSQL启动和停止" data-depth="3" class=""><a href="/draft/basic1#44-mysql启动和停止"><span>4.4 MYSQL启动和停止</span></a></li><li title="4.5 通过命令行连接MYSQL" data-depth="3" class=""><a href="/draft/basic1#45-通过命令行连接mysql"><span>4.5 通过命令行连接MYSQL</span></a></li><li title="4.6 切换数据库" data-depth="3" class=""><a href="/draft/basic1#46-切换数据库"><span>4.6 切换数据库</span></a></li><li title="4.7 显示有哪些表" data-depth="3" class=""><a href="/draft/basic1#47-显示有哪些表"><span>4.7 显示有哪些表</span></a></li><li title="4.8 显示当前数据库" data-depth="3" class=""><a href="/draft/basic1#48-显示当前数据库"><span>4.8 显示当前数据库</span></a></li><li title="4.9 查询表结构" data-depth="3" class=""><a href="/draft/basic1#49-查询表结构"><span>4.9 查询表结构</span></a></li><li title="5. 创建表" data-depth="2" class=""><a href="/draft/basic1#5-创建表"><span>5. 创建表</span></a></li><li title="6. 数据完整性" data-depth="2" class=""><a href="/draft/basic1#6-数据完整性"><span>6. 数据完整性</span></a></li><li title="6.1 域完整性" data-depth="3" class=""><a href="/draft/basic1#61-域完整性"><span>6.1 域完整性</span></a></li><li title="6.2 默认值" data-depth="3" class=""><a href="/draft/basic1#62-默认值"><span>6.2 默认值</span></a></li><li title="6.3 非空约束" data-depth="3" class=""><a href="/draft/basic1#63-非空约束"><span>6.3 非空约束</span></a></li><li title="7.实体完整性" data-depth="2" class=""><a href="/draft/basic1#7实体完整性"><span>7.实体完整性</span></a></li><li title="7.1 主键约束" data-depth="3" class=""><a href="/draft/basic1#71-主键约束"><span>7.1 主键约束</span></a></li><li title="7.2 外键" data-depth="3" class=""><a href="/draft/basic1#72-外键"><span>7.2 外键</span></a></li><li title="7.3 唯一约束" data-depth="3" class=""><a href="/draft/basic1#73-唯一约束"><span>7.3 唯一约束</span></a></li><li title="7.4 标识列" data-depth="3" class=""><a href="/draft/basic1#74-标识列"><span>7.4 标识列</span></a></li><li title="7.5 外键约束" data-depth="3" class=""><a href="/draft/basic1#75-外键约束"><span>7.5 外键约束</span></a></li><li title="8. 数据操作" data-depth="2" class=""><a href="/draft/basic1#8-数据操作"><span>8. 数据操作</span></a></li><li title="8.1 创建学生表" data-depth="3" class=""><a href="/draft/basic1#81-创建学生表"><span>8.1 创建学生表</span></a></li><li title="8.2 增加身份证号字段" data-depth="3" class=""><a href="/draft/basic1#82-增加身份证号字段"><span>8.2 增加身份证号字段</span></a></li><li title="8.3 添加约束" data-depth="3" class=""><a href="/draft/basic1#83-添加约束"><span>8.3 添加约束</span></a></li><li title="8.4 准备数据" data-depth="3" class=""><a href="/draft/basic1#84-准备数据"><span>8.4 准备数据</span></a></li><li title="9. SQL" data-depth="2" class=""><a href="/draft/basic1#9-sql"><span>9. SQL</span></a></li><li title="9.1 SQL是什么" data-depth="3" class=""><a href="/draft/basic1#91-sql是什么"><span>9.1 SQL是什么</span></a></li><li title="9.2 为什么要用SQL" data-depth="3" class=""><a href="/draft/basic1#92-为什么要用sql"><span>9.2 为什么要用SQL</span></a></li><li title="9.3 SQL组成" data-depth="3" class=""><a href="/draft/basic1#93-sql组成"><span>9.3 SQL组成</span></a></li><li title="9.4 SQL运算符" data-depth="3" class=""><a href="/draft/basic1#94-sql运算符"><span>9.4 SQL运算符</span></a></li><li title="9.5 查询窗口" data-depth="3" class=""><a href="/draft/basic1#95-查询窗口"><span>9.5 查询窗口</span></a></li><li title="9.6 数据操作语言" data-depth="3" class=""><a href="/draft/basic1#96-数据操作语言"><span>9.6 数据操作语言</span></a></li><li title="9.7 数据查询" data-depth="3" class=""><a href="/draft/basic1#97-数据查询"><span>9.7 数据查询</span></a></li><li title="9.8 函数" data-depth="3" class=""><a href="/draft/basic1#98-函数"><span>9.8 函数</span></a></li><li title="9.10 模糊查询" data-depth="3" class=""><a href="/draft/basic1#910-模糊查询"><span>9.10 模糊查询</span></a></li><li title="10. DCL" data-depth="2" class=""><a href="/draft/basic1#10-dcl"><span>10. DCL</span></a></li><li title="10.1 创建用户" data-depth="3" class=""><a href="/draft/basic1#101-创建用户"><span>10.1 创建用户</span></a></li><li title="10.2 授予权限" data-depth="3" class=""><a href="/draft/basic1#102-授予权限"><span>10.2 授予权限</span></a></li><li title="10.3 授予权限" data-depth="3" class=""><a href="/draft/basic1#103-授予权限"><span>10.3 授予权限</span></a></li><li title="10.4 查看用户权限" data-depth="3" class=""><a href="/draft/basic1#104-查看用户权限"><span>10.4 查看用户权限</span></a></li><li title="10.5 删除用户" data-depth="3" class=""><a href="/draft/basic1#105-删除用户"><span>10.5 删除用户</span></a></li><li title="10.6 修改密码" data-depth="3" class=""><a href="/draft/basic1#106-修改密码"><span>10.6 修改密码</span></a></li><li title="11. 存储过程" data-depth="2" class=""><a href="/draft/basic1#11-存储过程"><span>11. 存储过程</span></a></li><li title="11.1 语法" data-depth="3" class=""><a href="/draft/basic1#111-语法"><span>11.1 语法</span></a></li><li title="11.2 调用" data-depth="3" class=""><a href="/draft/basic1#112-调用"><span>11.2 调用</span></a></li><li title="11.3 删除" data-depth="3" class=""><a href="/draft/basic1#113-删除"><span>11.3 删除</span></a></li><li title="11.4 参数" data-depth="3" class=""><a href="/draft/basic1#114-参数"><span>11.4 参数</span></a></li><li title="12. 索引" data-depth="2" class=""><a href="/draft/basic1#12-索引"><span>12. 索引</span></a></li><li title="12.1 准备数据" data-depth="3" class=""><a href="/draft/basic1#121-准备数据"><span>12.1 准备数据</span></a></li><li title="12.2 创建普通索引" data-depth="3" class=""><a href="/draft/basic1#122-创建普通索引"><span>12.2 创建普通索引</span></a></li><li title="12.3 查看索引" data-depth="3" class=""><a href="/draft/basic1#123-查看索引"><span>12.3 查看索引</span></a></li><li title="12.4 删除索引" data-depth="3" class=""><a href="/draft/basic1#124-删除索引"><span>12.4 删除索引</span></a></li><li title="12.5 慢查询" data-depth="3" class=""><a href="/draft/basic1#125-慢查询"><span>12.5 慢查询</span></a></li><li title="12.6 索引创建的原则" data-depth="3" class=""><a href="/draft/basic1#126-索引创建的原则"><span>12.6 索引创建的原则</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="mysql基础1"><a aria-hidden="true" href="#mysql基础1"><span class="icon icon-link"></span></a>MySQL基础1</h1><h2 id="1-数据库能够做什么"><a aria-hidden="true" href="#1-数据库能够做什么"><span class="icon icon-link"></span></a>1. 数据库能够做什么</h2><ul><li>存储大量数据，方便检索和访问</li><li>保持数据信息的一致、完整</li><li>共享和安全</li><li>通过组合分析，产生新的有用信息</li></ul><h2 id="2-数据库的基本概念"><a aria-hidden="true" href="#2-数据库的基本概念"><span class="icon icon-link"></span></a>2. 数据库的基本概念</h2><h3 id="21-实体"><a aria-hidden="true" href="#21-实体"><span class="icon icon-link"></span></a>2.1 实体</h3><p>只要是在客观世界存在的、可以被描述出来的都是实体</p><h3 id="22-数据库db"><a aria-hidden="true" href="#22-数据库db"><span class="icon icon-link"></span></a>2.2 数据库(DB)</h3><ul><li>数据库就是数据的仓库，可以存放结构化的数据</li></ul><h3 id="23-数据库管理系统dbms"><a aria-hidden="true" href="#23-数据库管理系统dbms"><span class="icon icon-link"></span></a>2.3 数据库管理系统(DBMS)</h3><p>是一种系统软件，提供操作数据库的环境，可以通过数据库管理系统对数据进行插入、修改、删除和查询等操作。</p><h3 id="24-sql"><a aria-hidden="true" href="#24-sql"><span class="icon icon-link"></span></a>2.4 SQL</h3><p>结构化查询语言 专门用来和数据库进行交流的语言,几乎所有的DBMS都支持SQL</p><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032159.png" alt="dbms"/></p><h3 id="25-sql规范"><a aria-hidden="true" href="#25-sql规范"><span class="icon icon-link"></span></a>2.5 SQL规范</h3><ol><li>SQL语句不区分大小写，建议SQL关键字大写，表名和列表小写</li><li>命令用分号结尾</li><li>命令可以缩进和换行，一种类型的关键字放在一行</li><li>可以写单行和多行注释 , #和--是单行注释，/***/多行注释</li></ol><h2 id="3-数据表"><a aria-hidden="true" href="#3-数据表"><span class="icon icon-link"></span></a>3. 数据表</h2><ul><li>表是数据库中包含所有数据的数据库对象，也是其它对象的基础。</li><li>表定义是一个列的集合，数据在表中是按行和列的格式组织的，用来存放数据</li><li>行也称为记录用来存放一个个实体，列称为字段用来描述实体的某一个属性 学生管理系统</li></ul><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032538.png" alt="table"/></p><h2 id="4mysql简介"><a aria-hidden="true" href="#4mysql简介"><span class="icon icon-link"></span></a>4.MYSQL简介</h2><h3 id="41-mysql特点"><a aria-hidden="true" href="#41-mysql特点"><span class="icon icon-link"></span></a>4.1 MYSQL特点</h3><ul><li>开源免费</li><li>性能高</li><li>安装使用都简单</li></ul><h3 id="42-mysql安装"><a aria-hidden="true" href="#42-mysql安装"><span class="icon icon-link"></span></a>4.2 MYSQL安装</h3><ul><li><a href="https://dev.mysql.com/downloads/mysql/5.5.html" target="_blank" rel="noopener noreferrer">mysql下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>安装MYSQL</li></ul><h3 id="43-mysql配置"><a aria-hidden="true" href="#43-mysql配置"><span class="icon icon-link"></span></a>4.3 MYSQL配置</h3><p>C:\Program Files\MySQL\MySQL Server 5.5\my.ini</p><ul><li>port 端口号</li><li>basedir 安装目录</li><li>datadir 数据存放访目录</li><li>character_set_server 字符集</li><li>default-storage-engine 存储引擎</li><li>sql-mode 语法模式</li><li>max-connections 最大连接数</li></ul><h3 id="44-mysql启动和停止"><a aria-hidden="true" href="#44-mysql启动和停止"><span class="icon icon-link"></span></a>4.4 MYSQL启动和停止</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="net start MySQL
net stop MySQL
" data-status="copy"></button><div class="token-line"><span class="token plain">net start </span><span class="token maybe-class-name">MySQL</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">net stop </span><span class="token maybe-class-name">MySQL</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="45-通过命令行连接mysql"><a aria-hidden="true" href="#45-通过命令行连接mysql"><span class="icon icon-link"></span></a>4.5 通过命令行连接MYSQL</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="mysql -h 127.0.0.1 -P 3306 -uroot -p123456
exit
" data-status="copy"></button><div class="token-line"><span class="token plain">mysql </span><span class="token operator">-</span><span class="token plain">h </span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token plain"> </span><span class="token operator">-</span><span class="token constant">P</span><span class="token plain"> </span><span class="token number">3306</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain">uroot </span><span class="token operator">-</span><span class="token plain">p123456</span></div><div class="token-line"><span class="token plain">exit</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="46-切换数据库"><a aria-hidden="true" href="#46-切换数据库"><span class="icon icon-link"></span></a>4.6 切换数据库</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="use test;
" data-status="copy"></button><div class="token-line"><span class="token plain">use test</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="47-显示有哪些表"><a aria-hidden="true" href="#47-显示有哪些表"><span class="icon icon-link"></span></a>4.7 显示有哪些表</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="show tables;
show tables from mysql;
" data-status="copy"></button><div class="token-line"><span class="token plain">show tables</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">show tables </span><span class="token keyword module">from</span><span class="token plain"> mysql</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="48-显示当前数据库"><a aria-hidden="true" href="#48-显示当前数据库"><span class="icon icon-link"></span></a>4.8 显示当前数据库</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select database();
" data-status="copy"></button><div class="token-line"><span class="token plain">select </span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="49-查询表结构"><a aria-hidden="true" href="#49-查询表结构"><span class="icon icon-link"></span></a>4.9 查询表结构</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="DESC user;
" data-status="copy"></button><div class="token-line"><span class="token constant">DESC</span><span class="token plain"> user</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="5-创建表"><a aria-hidden="true" href="#5-创建表"><span class="icon icon-link"></span></a>5. 创建表</h2><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032714.png" alt="student"/><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032738.png" alt="course"/><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032745.png" alt="score"/></p><h2 id="6-数据完整性"><a aria-hidden="true" href="#6-数据完整性"><span class="icon icon-link"></span></a>6. 数据完整性</h2><ul><li>为了实现数据完整性，需要检验数据库表中的每行和每列数据是否符合要求</li><li>在创建表的时候，应该保证以后的数据输入是正确的，错误的数据不允许输入</li></ul><h3 id="61-域完整性"><a aria-hidden="true" href="#61-域完整性"><span class="icon icon-link"></span></a>6.1 域完整性</h3><p>不同的字段需要设置为各种合适的类型，比如年龄就是整数类型</p><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032816.jpg" alt="datatype"/></p><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032834.jpg" alt="mysqlint"/></p><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-032829.jpg" alt="mysqlnumber"/></p><h3 id="62-默认值"><a aria-hidden="true" href="#62-默认值"><span class="icon icon-link"></span></a>6.2 默认值</h3><p>默认值是指如果用户没有指定值的情况下会记录的此字段指定一个提供一个预先设定的值</p><blockquote><p>可以把居住地默认值设置为北京</p></blockquote><h3 id="63-非空约束"><a aria-hidden="true" href="#63-非空约束"><span class="icon icon-link"></span></a>6.3 非空约束</h3><p>我们可以指定某个字段不能不输入，必须提供一个非空的值</p><blockquote><p>姓名字段不能为空</p></blockquote><h2 id="7实体完整性"><a aria-hidden="true" href="#7实体完整性"><span class="icon icon-link"></span></a>7.实体完整性</h2><h3 id="71-主键约束"><a aria-hidden="true" href="#71-主键约束"><span class="icon icon-link"></span></a>7.1 主键约束</h3><ul><li>表中一列或者几列组合的值能用来唯一标识表中的每一行，这样的列或者列组合称为表的主键，主键表的数据不同重复。</li><li>如果两列或者多列组合起来唯一标识表中的每一行，则该主键又称为&quot;组合键&quot;</li></ul><p><strong>主键的选择标准</strong></p><ol><li>最少性 尽量选择单个键作为主键</li><li>稳定性 ，由于主键是用来在两个表间建立联接的，所以不能经常更新，最好就不更新</li></ol><h3 id="72-外键"><a aria-hidden="true" href="#72-外键"><span class="icon icon-link"></span></a>7.2 外键</h3><p>成绩表中的学生ID应该在学生表中是存在的 我们应该让成绩表中的ID只能引用学生表中的ID，它们的值应该是一一对应的，也就是说成绩表中的ID是成绩表中的外键，对应学生表的主键 ，这样就可以保证数据的引用完整性</p><h3 id="73-唯一约束"><a aria-hidden="true" href="#73-唯一约束"><span class="icon icon-link"></span></a>7.3 唯一约束</h3><p>唯一约束是指某个字段值是唯一的，在所有的记录中不能有重复的值.</p><blockquote><p>学生的身份证号可以设置为唯一约束</p></blockquote><h3 id="74-标识列"><a aria-hidden="true" href="#74-标识列"><span class="icon icon-link"></span></a>7.4 标识列</h3><ul><li>当表中没有合适的列作为主键时可以考虑增加标识列，标识列是一个无实际业务含义的列，仅仅用来区分每条记录。</li><li>标识列的值是自动生成的，不能在该列上输入数据</li></ul><h3 id="75-外键约束"><a aria-hidden="true" href="#75-外键约束"><span class="icon icon-link"></span></a>7.5 外键约束</h3><p>一个表的外键必须引用另一个表的主键,比如成绩表中的学生ID会引用学生表的主键，课程ID会引用成绩表的主键</p><ul><li>主表没有记录，子表中不能添加相应的记录</li><li>修改和删除主表记录不能让子表记录孤立，必须相应修改和删除</li></ul><h2 id="8-数据操作"><a aria-hidden="true" href="#8-数据操作"><span class="icon icon-link"></span></a>8. 数据操作</h2><h3 id="81-创建学生表"><a aria-hidden="true" href="#81-创建学生表"><span class="icon icon-link"></span></a>8.1 创建学生表</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE TABLE `student` (
`id`  int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT   ,
`name`  varchar(50) NOT NULL ,
`age`  int(11) NULL DEFAULT NULL ,
`city`  varchar(50) DEFAULT &#x27;北京&#x27; ,
)
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token keyword">AUTO_INCREMENT</span><span class="token plain">   </span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">`</span><span class="token plain">name</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">`</span><span class="token plain">age</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">`</span><span class="token plain">city</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token string">&#x27;北京&#x27;</span><span class="token plain"> </span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="82-增加身份证号字段"><a aria-hidden="true" href="#82-增加身份证号字段"><span class="icon icon-link"></span></a>8.2 增加身份证号字段</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="ALTER TABLE `student` ADD COLUMN `idcard`  varchar(15) NULL AFTER `city`; --增加身份证字段
ALTER TABLE `student` MODIFY COLUMN `idcard`  varchar(18) DEFAULT NULL AFTER `name`; --修改身份证字段
ALTER TABLE `student`DROP COLUMN `idcard`; --删除身份证字段
" data-status="copy"></button><div class="token-line"><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">idcard</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AFTER</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">city</span><span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">--增加身份证字段</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">MODIFY</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">idcard</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AFTER</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">name</span><span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">--修改身份证字段</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token keyword">DROP</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">idcard</span><span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">--删除身份证字段</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="83-添加约束"><a aria-hidden="true" href="#83-添加约束"><span class="icon icon-link"></span></a>8.3 添加约束</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="-- 主键约束
ALTER TABLE `student` ADD PRIMARY KEY (`id`);
-- 唯一约束
ALTER TABLE `student` ADD UNIQUE INDEX `uq_idcard` (`idcard`) ;
-- 默认约束
ALTER TABLE `student` MODIFY COLUMN `city`  varchar(50)  DEFAULT &#x27;北京&#x27; AFTER `age`;
-- 外键约束
ALTER TABLE `score` ADD CONSTRAINT `fk_stuid` FOREIGN KEY (`student_id`) REFERENCES `student` (`id`);
-- 删除约束
ALTER TABLE `score` DROP FOREIGN KEY `fk_stuid`;
" data-status="copy"></button><div class="token-line"><span class="token comment">-- 主键约束</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 唯一约束</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">UNIQUE</span><span class="token plain"> </span><span class="token keyword">INDEX</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">uq_idcard</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">idcard</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 默认约束</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">MODIFY</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">city</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain">  </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token string">&#x27;北京&#x27;</span><span class="token plain"> </span><span class="token keyword">AFTER</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">age</span><span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 外键约束</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">CONSTRAINT</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">fk_stuid</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">FOREIGN</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">student_id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">REFERENCES</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 删除约束</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">DROP</span><span class="token plain"> </span><span class="token keyword">FOREIGN</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">fk_stuid</span><span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="84-准备数据"><a aria-hidden="true" href="#84-准备数据"><span class="icon icon-link"></span></a>8.4 准备数据</h3><p><img src="http://img.zhufengpeixun.cn/relations.png" alt="relations"/></p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE TABLE `student` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `idcard` varchar(18) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `city` varchar(50) DEFAULT &#x27;&#x27;,
  PRIMARY KEY (`id`)
);

CREATE TABLE `course` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `score` (
  `student_id` int(11) NOT NULL DEFAULT &#x27;0&#x27;,
  `course_id` int(11) NOT NULL DEFAULT &#x27;0&#x27;,
  `grade` float DEFAULT NULL,
  PRIMARY KEY (`student_id`,`course_id`),
  KEY `fk_courseid` (`course_id`),
  CONSTRAINT `fk_courseid` FOREIGN KEY (`course_id`) REFERENCES `course` (`id`),
  CONSTRAINT `fk_stuid` FOREIGN KEY (`student_id`) REFERENCES `student` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">name</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">idcard</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">age</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">city</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">course</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">name</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">student_id</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token string">&#x27;0&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">course_id</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token string">&#x27;0&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">`</span><span class="token plain">grade</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">float</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">student_id</span><span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span><span class="token plain">course_id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">fk_courseid</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">course_id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">CONSTRAINT</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">fk_courseid</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">FOREIGN</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">course_id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">REFERENCES</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">course</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">CONSTRAINT</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">fk_stuid</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">FOREIGN</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">student_id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">REFERENCES</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token plain">id</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token keyword">CHARSET</span><span class="token operator">=</span><span class="token plain">utf8</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="9-sql"><a aria-hidden="true" href="#9-sql"><span class="icon icon-link"></span></a>9. SQL</h2><h3 id="91-sql是什么"><a aria-hidden="true" href="#91-sql是什么"><span class="icon icon-link"></span></a>9.1 SQL是什么</h3><p>Structured Query Language：结构化查询语言</p><h3 id="92-为什么要用sql"><a aria-hidden="true" href="#92-为什么要用sql"><span class="icon icon-link"></span></a>9.2 为什么要用SQL</h3><ol><li>使用界面操作数据库不方便</li><li>我们需要通过应用程序去操作数据库</li></ol><h3 id="93-sql组成"><a aria-hidden="true" href="#93-sql组成"><span class="icon icon-link"></span></a>9.3 SQL组成</h3><h4 id="931-ddl（data-definition-language）是数据定义语言"><a aria-hidden="true" href="#931-ddl（data-definition-language）是数据定义语言"><span class="icon icon-link"></span></a>9.3.1 DDL（data definition language）是数据定义语言</h4><p>主要的命令有<code>CREATE</code>、<code>ALTER</code>、<code>DROP</code>等，<strong>DDL</strong>主要是用在定义或改变表（TABLE）的结构，数据类型，表之间的链接和约束等初始化工作上，他们大多在建立表时使用</p><h4 id="932-dml（data-manipulation-language）是数据操纵语言"><a aria-hidden="true" href="#932-dml（data-manipulation-language）是数据操纵语言"><span class="icon icon-link"></span></a>9.3.2 DML（data manipulation language）是数据操纵语言</h4><p>它们是<code>SELECT</code>、<code>UPDATE、</code>INSERT<code>、</code>DELETE`，就象它的名字一样，这4条命令是用来对数据库里的数据进行操作的语言</p><h4 id="933-dcl（datacontrollanguage）是数据库控制语言"><a aria-hidden="true" href="#933-dcl（datacontrollanguage）是数据库控制语言"><span class="icon icon-link"></span></a>9.3.3 DCL（DataControlLanguage）是数据库控制语言</h4><p>是用来设置或更改数据库用户或角色权限的语句，包括（<code>grant</code>,<code>revoke</code>等）语句</p><h3 id="94-sql运算符"><a aria-hidden="true" href="#94-sql运算符"><span class="icon icon-link"></span></a>9.4 SQL运算符</h3><p>是一种符号，它是用来进行列间或者变量之间的比较和数学运算的</p><h4 id="941-算术运算符"><a aria-hidden="true" href="#941-算术运算符"><span class="icon icon-link"></span></a>9.4.1 算术运算符</h4><table><thead><tr><th align="left">运算符</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">+</td><td align="left">加运算，求两个数或表达式相加的和，如1+1</td></tr><tr><td align="left">-</td><td align="left">减少减运算，求两个数或表达式相减的差，如4-1</td></tr><tr><td align="left">*</td><td align="left">乘运算，求两个数或表达式相乘的积，如2*2</td></tr><tr><td align="left">/</td><td align="left">除运算，求两个数或表达式相除的商，如6/4的值为1</td></tr><tr><td align="left">%</td><td align="left">取模运算，求两个数或表达式相除的余数，如：6%4的值为2</td></tr></tbody></table><ul><li>查询姓名全称</li></ul><h4 id="942-逻辑运算符"><a aria-hidden="true" href="#942-逻辑运算符"><span class="icon icon-link"></span></a>9.4.2 逻辑运算符</h4><table><thead><tr><th align="left">运算符</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">AND</td><td align="left">当且仅当两个布尔表达式都为true时，返回TRUE</td></tr><tr><td align="left">OR</td><td align="left">当且仅当两个布尔表达式都为false，返回FALSE</td></tr><tr><td align="left">NOT</td><td align="left">布尔表达式的值取反</td></tr></tbody></table><h4 id="943-比较运算符"><a aria-hidden="true" href="#943-比较运算符"><span class="icon icon-link"></span></a>9.4.3 比较运算符</h4><table><thead><tr><th align="left">运算符</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">=</td><td align="left">等于</td></tr><tr><td align="left">&gt;</td><td align="left">大于</td></tr><tr><td align="left">&lt;</td><td align="left">小于</td></tr><tr><td align="left">&lt;&gt;</td><td align="left">不等于</td></tr><tr><td align="left">&gt;=</td><td align="left">大于等于</td></tr><tr><td align="left">&lt;=</td><td align="left">小于等于</td></tr><tr><td align="left">!=</td><td align="left">不等于</td></tr></tbody></table><h3 id="95-查询窗口"><a aria-hidden="true" href="#95-查询窗口"><span class="icon icon-link"></span></a>9.5 查询窗口</h3><p><img src="http://img.zhufengpeixun.cn/query.png" alt="query"/></p><h3 id="96-数据操作语言"><a aria-hidden="true" href="#96-数据操作语言"><span class="icon icon-link"></span></a>9.6 数据操作语言</h3><h4 id="961-插入数据行"><a aria-hidden="true" href="#961-插入数据行"><span class="icon icon-link"></span></a>9.6.1 插入数据行</h4><h5 id="9611-语法"><a aria-hidden="true" href="#9611-语法"><span class="icon icon-link"></span></a>9.6.1.1 语法</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text=" INSERT  [INTO]  表名  [(列名)] VALUES  (值列表)
" data-status="copy"></button><div class="token-line"><span class="token plain"> </span><span class="token keyword">INSERT</span><span class="token plain">  </span><span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span><span class="token plain">  表名  </span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token plain">列名</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain">  </span><span class="token punctuation">(</span><span class="token plain">值列表</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9612-插入记录"><a aria-hidden="true" href="#9612-插入记录"><span class="icon icon-link"></span></a>9.6.1.2 插入记录</h5><p>向学生表插入一条记录, 姓名张三,身份证号123456,年龄30,城市北京</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="INSERT INTO [school].[student]
(name,idcard,age,city)
VALUES
(&#x27;张三&#x27;,&#x27;123456&#x27;,30,&#x27;北京&#x27;)
" data-status="copy"></button><div class="token-line"><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">school</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token plain">student</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">(</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">VALUES</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">(</span><span class="token string">&#x27;张三&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;123456&#x27;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token string">&#x27;北京&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9613-注意事项"><a aria-hidden="true" href="#9613-注意事项"><span class="icon icon-link"></span></a>9.6.1.3 注意事项</h5><ul><li>每次插入一行数据，不能只插入一部分数据，插入的数据是否有效将按照整行的完整性要求来检验</li><li>每个数据值的数据类型、精度、位数必须与要应的列名精确匹配</li><li>不能为标识符指定值</li><li>如果某字段设置为不能为空，则必须插入数据</li><li>插入数据时还要符合检查性约束的要求</li><li>有缺省值的列，可以使用DEFAULT关键字来代替插入实际的值</li></ul><h4 id="962-更新数据行"><a aria-hidden="true" href="#962-更新数据行"><span class="icon icon-link"></span></a>9.6.2 更新数据行</h4><h5 id="9621-语法"><a aria-hidden="true" href="#9621-语法"><span class="icon icon-link"></span></a>9.6.2.1 语法</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="UPDATE 表名 SET 列名 = 更新值 [WHERE 更新条件]
" data-status="copy"></button><div class="token-line"><span class="token keyword">UPDATE</span><span class="token plain"> 表名 </span><span class="token keyword">SET</span><span class="token plain"> 列名 </span><span class="token operator">=</span><span class="token plain"> 更新值 </span><span class="token punctuation">[</span><span class="token keyword">WHERE</span><span class="token plain"> 更新条件</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9622-更新记录"><a aria-hidden="true" href="#9622-更新记录"><span class="icon icon-link"></span></a>9.6.2.2 更新记录</h5><ul><li>更新ID等于7的学生年龄改为40，城市改为上海</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="UPDATE [school].[student]
    SET age = 40,city = &#x27;上海&#x27;
WHERE id=7
" data-status="copy"></button><div class="token-line"><span class="token keyword">UPDATE</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">school</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token plain">student</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">SET</span><span class="token plain"> age </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">40</span><span class="token punctuation">,</span><span class="token plain">city </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;上海&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> id</span><span class="token operator">=</span><span class="token number">7</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9623-注意"><a aria-hidden="true" href="#9623-注意"><span class="icon icon-link"></span></a>9.6.2.3 注意</h5><ul><li>多列时用逗号隔开，一定要加更新条件以免错误更新</li><li>多个联合条件使用 AND <code>id=7 and idcard=&#x27;410787&#x27;</code></li><li>判断某字段是否为空 <code>email is null or email = &#x27;&#x27;</code></li></ul><h4 id="963-删除数据"><a aria-hidden="true" href="#963-删除数据"><span class="icon icon-link"></span></a>9.6.3 删除数据</h4><h5 id="9631-语法"><a aria-hidden="true" href="#9631-语法"><span class="icon icon-link"></span></a>9.6.3.1 语法</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="DELETE [FROM]  表名 [WHERE &lt;删除条件&gt;]
" data-status="copy"></button><div class="token-line"><span class="token keyword">DELETE</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token keyword">FROM</span><span class="token punctuation">]</span><span class="token plain">  表名 </span><span class="token punctuation">[</span><span class="token keyword">WHERE</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">删除条件</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9632-删除记录"><a aria-hidden="true" href="#9632-删除记录"><span class="icon icon-link"></span></a>9.6.3.2 删除记录</h5><ul><li>删除ID=7的学生记录</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="DELETE FROM [school].[student] WHERE id=7
" data-status="copy"></button><div class="token-line"><span class="token keyword">DELETE</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">school</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token plain">student</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token keyword">WHERE</span><span class="token plain"> id</span><span class="token operator">=</span><span class="token number">7</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9633-注意"><a aria-hidden="true" href="#9633-注意"><span class="icon icon-link"></span></a>9.6.3.3 注意</h5><ul><li>Delete语句是对整行进行操作，因此不需要提供列名</li><li>如果要删除主表数据，则要先删除子表记录</li></ul><h4 id="964-truncate-截断表"><a aria-hidden="true" href="#964-truncate-截断表"><span class="icon icon-link"></span></a>9.6.4 TRUNCATE 截断表</h4><p>截断整个表中的数据</p><h5 id="9641-语法"><a aria-hidden="true" href="#9641-语法"><span class="icon icon-link"></span></a>9.6.4.1 语法</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="TRUNCATE  TABLE  表名
" data-status="copy"></button><div class="token-line"><span class="token keyword">TRUNCATE</span><span class="token plain">  </span><span class="token keyword">TABLE</span><span class="token plain">  表名</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9642-截断学生表"><a aria-hidden="true" href="#9642-截断学生表"><span class="icon icon-link"></span></a>9.6.4.2 截断学生表</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="TRUNCATE TABLE student
" data-status="copy"></button><div class="token-line"><span class="token keyword">TRUNCATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> student</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><blockquote><p>数据全部清空,但表结构、列、约束等不被改动 不能用于有外键约束引用的表 标识列重新开始编号 因为要删除的数据不会写入日志，数据也不能恢复，所以工作中请尽量不要使用此命令</p></blockquote><h3 id="97-数据查询"><a aria-hidden="true" href="#97-数据查询"><span class="icon icon-link"></span></a>9.7 数据查询</h3><ul><li>查询就是从客户端 发出查询请求数据库服务器，并从数据库返回查询结果的过程</li><li>每次执行查询只是从数据表中提取数据，并按表的方式呈现出来</li><li>查询产生的是虚拟表,并不会保存起来</li></ul><h4 id="971-查询"><a aria-hidden="true" href="#971-查询"><span class="icon icon-link"></span></a>9.7.1 查询</h4><h5 id="9711-语法"><a aria-hidden="true" href="#9711-语法"><span class="icon icon-link"></span></a>9.7.1.1 语法</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT    &lt;列名&gt; 
FROM      &lt;表名&gt; 
[WHERE    &lt;查询条件表达式&gt;] 
[ORDER BY &lt;排序的列名&gt;[ASC或DESC]]
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token plain">列名</span><span class="token operator">&gt;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token plain">表名</span><span class="token operator">&gt;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token keyword">WHERE</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token plain">查询条件表达式</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token keyword">ORDER</span><span class="token plain"> </span><span class="token keyword">BY</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">排序的列名</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token plain">或</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9712-排序"><a aria-hidden="true" href="#9712-排序"><span class="icon icon-link"></span></a>9.7.1.2 排序</h5><ul><li>查询北京的学生信息，并按ID正序排列</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT id,name,idcard,age,city
FROM student
WHERE home= &#x27;北京&#x27;
ORDER BY id asc
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> student</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> home</span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;北京&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ORDER</span><span class="token plain"> </span><span class="token keyword">BY</span><span class="token plain"> id </span><span class="token keyword">asc</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9713-别名"><a aria-hidden="true" href="#9713-别名"><span class="icon icon-link"></span></a>9.7.1.3 别名</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT id,name,idcard,age,city AS home
FROM student
WHERE city= &#x27;山东&#x27;
ORDER BY id asc
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city </span><span class="token keyword">AS</span><span class="token plain"> home</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> student</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> city</span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;山东&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ORDER</span><span class="token plain"> </span><span class="token keyword">BY</span><span class="token plain"> id </span><span class="token keyword">asc</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9714-查询空行"><a aria-hidden="true" href="#9714-查询空行"><span class="icon icon-link"></span></a>9.7.1.4 查询空行</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT id,name,age,city
FROM student
WHERE city is null or city =&#x27;&#x27;
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> student</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHERE</span><span class="token plain"> city </span><span class="token operator">is</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"> </span><span class="token operator">or</span><span class="token plain"> city </span><span class="token operator">=</span><span class="token string">&#x27;&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9715-常量列"><a aria-hidden="true" href="#9715-常量列"><span class="icon icon-link"></span></a>9.7.1.5 常量列</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT id,name,age,city,&#x27;中国&#x27; as country
FROM student
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">,</span><span class="token string">&#x27;中国&#x27;</span><span class="token plain"> </span><span class="token keyword">as</span><span class="token plain"> country</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> student</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9716-限制返回的行数"><a aria-hidden="true" href="#9716-限制返回的行数"><span class="icon icon-link"></span></a>9.7.1.6 限制返回的行数</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT id,name,age,city,&#x27;中国&#x27; as country
FROM student limit 2
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">,</span><span class="token string">&#x27;中国&#x27;</span><span class="token plain"> </span><span class="token keyword">as</span><span class="token plain"> country</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> student </span><span class="token keyword">limit</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9717-distinct"><a aria-hidden="true" href="#9717-distinct"><span class="icon icon-link"></span></a>9.7.1.7 DISTINCT</h5><ul><li>查询同学们一共来自哪些不同的城市</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT id,name,age,DISTINCT city,&#x27;中国&#x27; as country
FROM student 
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token keyword">DISTINCT</span><span class="token plain"> city</span><span class="token punctuation">,</span><span class="token string">&#x27;中国&#x27;</span><span class="token plain"> </span><span class="token keyword">as</span><span class="token plain"> country</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> student </span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9718-"><a aria-hidden="true" href="#9718-"><span class="icon icon-link"></span></a>9.7.1.8 +</h5><ul><li>在MYSQL中+号只能用作于数字</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="  SELECT 1+1
  SELECT 1+&#x27;1&#x27;
  SELECT 1+&#x27;zfpx&#x27;  
  SELECT 1+null
  SELECT CONCAT(last_name,first_name) FROM user;
" data-status="copy"></button><div class="token-line"><span class="token plain">  </span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token number">1</span><span class="token operator">+</span><span class="token string">&#x27;1&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token number">1</span><span class="token operator">+</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token plain">  </span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token number">1</span><span class="token operator">+</span><span class="token boolean">null</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">SELECT</span><span class="token plain"> CONCAT</span><span class="token punctuation">(</span><span class="token plain">last_name</span><span class="token punctuation">,</span><span class="token plain">first_name</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> </span><span class="token keyword">user</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9717-练习"><a aria-hidden="true" href="#9717-练习"><span class="icon icon-link"></span></a>9.7.1.7 练习</h5><h6 id="97171-准备数据"><a aria-hidden="true" href="#97171-准备数据"><span class="icon icon-link"></span></a>9.7.1.7.1 准备数据</h6><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="ALTER TABLE `student`
ADD COLUMN `province`  varchar(50) NULL AFTER `city`,
ADD COLUMN `birthday`  date NULL AFTER `province`,
ADD COLUMN `gender`   int(11) NULL AFTER `birthday`,
ADD COLUMN `email`  varchar(50) NULL AFTER `gender`;
" data-status="copy"></button><div class="token-line"><span class="token keyword">ALTER</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">province</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AFTER</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">city</span><span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">birthday</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">date</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AFTER</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">province</span><span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">gender</span><span class="token punctuation">`</span><span class="token plain">   </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AFTER</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">birthday</span><span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ADD</span><span class="token plain"> </span><span class="token keyword">COLUMN</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">email</span><span class="token punctuation">`</span><span class="token plain">  </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword">AFTER</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">gender</span><span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-033830.png" alt="studenttable"/> <img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-033859.png" alt="coursetable"/><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-033904.png" alt="scoretable"/></p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="INSERT INTO `student`(id,name,gender,age,city,province,birthday,idcard,email) VALUES (&#x27;1&#x27;, &#x27;郭靖&#x27;, &#x27;1&#x27;, &#x27;1&#x27;, &#x27;济南&#x27;, &#x27;山东省&#x27;, &#x27;1982-09-03&#x27;, 1, &#x27;1@qq.com&#x27;);
INSERT INTO `student`(id,name,gender,age,city,province,birthday,idcard,email) VALUES (&#x27;2&#x27;, &#x27;黄蓉&#x27;, &#x27;2&#x27;, &#x27;2&#x27;, &#x27;济南&#x27;, &#x27;山东省&#x27;, &#x27;1982-09-03&#x27;, 0, &#x27;2@qq.com&#x27;);
INSERT INTO `student`(id,name,gender,age,city,province,birthday,idcard,email) VALUES (&#x27;3&#x27;, &#x27;杨过&#x27;, &#x27;3&#x27;, &#x27;3&#x27;, &#x27;终南山&#x27;, &#x27;陕西省&#x27;, &#x27;1979-09-03&#x27;, 1, &#x27;3@qq.com&#x27;);
INSERT INTO `student`(id,name,gender,age,city,province,birthday,idcard,email) VALUES (&#x27;4&#x27;, &#x27;小龙女&#x27;, &#x27;4&#x27;, &#x27;4&#x27;, &#x27;终南山&#x27;, &#x27;陕西省&#x27;, &#x27;1970-09-03&#x27;, 0, &#x27;4@qq.com&#x27;);
INSERT INTO `student`(id,name,gender,age,city,province,birthday,idcard,email) VALUES (&#x27;5&#x27;, &#x27;欧阳锋&#x27;, &#x27;5&#x27;, &#x27;5&#x27;, &#x27;白驼山&#x27;, &#x27;新疆&#x27;, &#x27;1989-09-09&#x27;, 1, &#x27;5@qq.com&#x27;);


INSERT INTO `course` VALUES (&#x27;1&#x27;, &#x27;语文&#x27;);
INSERT INTO `course` VALUES (&#x27;2&#x27;, &#x27;数学&#x27;);
INSERT INTO `course` VALUES (&#x27;3&#x27;, &#x27;英语&#x27;);

INSERT INTO `score` VALUES (&#x27;1&#x27;, &#x27;1&#x27;, &#x27;100&#x27;);
INSERT INTO `score` VALUES (&#x27;1&#x27;, &#x27;2&#x27;, &#x27;90&#x27;);
INSERT INTO `score` VALUES (&#x27;1&#x27;, &#x27;3&#x27;, &#x27;70&#x27;);
INSERT INTO `score` VALUES (&#x27;2&#x27;, &#x27;1&#x27;, &#x27;100&#x27;);
INSERT INTO `score` VALUES (&#x27;2&#x27;, &#x27;2&#x27;, &#x27;90&#x27;);
INSERT INTO `score` VALUES (&#x27;2&#x27;, &#x27;3&#x27;, &#x27;80&#x27;);
INSERT INTO `score` VALUES (&#x27;3&#x27;, &#x27;1&#x27;, &#x27;100&#x27;);
INSERT INTO `score` VALUES (&#x27;3&#x27;, &#x27;2&#x27;, &#x27;90&#x27;);
INSERT INTO `score` VALUES (&#x27;3&#x27;, &#x27;3&#x27;, &#x27;80&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token plain">id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">gender</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">,</span><span class="token plain">province</span><span class="token punctuation">,</span><span class="token plain">birthday</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">email</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;郭靖&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;济南&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;山东省&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1982-09-03&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1@qq.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token plain">id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">gender</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">,</span><span class="token plain">province</span><span class="token punctuation">,</span><span class="token plain">birthday</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">email</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;黄蓉&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;济南&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;山东省&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1982-09-03&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;2@qq.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token plain">id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">gender</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">,</span><span class="token plain">province</span><span class="token punctuation">,</span><span class="token plain">birthday</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">email</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;杨过&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;终南山&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;陕西省&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1979-09-03&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;3@qq.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token plain">id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">gender</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">,</span><span class="token plain">province</span><span class="token punctuation">,</span><span class="token plain">birthday</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">email</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;4&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;小龙女&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;4&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;4&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;终南山&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;陕西省&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1970-09-03&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;4@qq.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">student</span><span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token plain">id</span><span class="token punctuation">,</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain">gender</span><span class="token punctuation">,</span><span class="token plain">age</span><span class="token punctuation">,</span><span class="token plain">city</span><span class="token punctuation">,</span><span class="token plain">province</span><span class="token punctuation">,</span><span class="token plain">birthday</span><span class="token punctuation">,</span><span class="token plain">idcard</span><span class="token punctuation">,</span><span class="token plain">email</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;5&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;欧阳锋&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;5&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;5&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;白驼山&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;新疆&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1989-09-09&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;5@qq.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">course</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;语文&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">course</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;数学&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">course</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;英语&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;100&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;90&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;70&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;100&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;90&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;80&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;100&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;90&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">score</span><span class="token punctuation">`</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;80&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h6 id="97172-查询山东省的同学全部信息"><a aria-hidden="true" href="#97172-查询山东省的同学全部信息"><span class="icon icon-link"></span></a>9.7.1.7.2 查询山东省的同学全部信息</h6><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select * from student where province = &#x27;山东&#x27;;
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> student </span><span class="token keyword">where</span><span class="token plain"> province </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;山东&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h6 id="97173-查询山东省的男同学的全部信息"><a aria-hidden="true" href="#97173-查询山东省的男同学的全部信息"><span class="icon icon-link"></span></a>9.7.1.7.3 查询山东省的男同学的全部信息</h6><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select * from student where province = &#x27;山东&#x27; and gender=1;
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> student </span><span class="token keyword">where</span><span class="token plain"> province </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;山东&#x27;</span><span class="token plain"> </span><span class="token operator">and</span><span class="token plain"> gender</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h6 id="97174-查询没有填写电子邮箱的同学的姓名和身份证号"><a aria-hidden="true" href="#97174-查询没有填写电子邮箱的同学的姓名和身份证号"><span class="icon icon-link"></span></a>9.7.1.7.4 查询没有填写电子邮箱的同学的姓名和身份证号</h6><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT name,idcard FROM student WHERE email IS NULL
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> name</span><span class="token punctuation">,</span><span class="token plain">idcard </span><span class="token keyword">FROM</span><span class="token plain"> student </span><span class="token keyword">WHERE</span><span class="token plain"> email </span><span class="token operator">IS</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9718-排序"><a aria-hidden="true" href="#9718-排序"><span class="icon icon-link"></span></a>9.7.1.8 排序</h5><h6 id="97181-把学生的分数按升序排列"><a aria-hidden="true" href="#97181-把学生的分数按升序排列"><span class="icon icon-link"></span></a>9.7.1.8.1 把学生的分数按升序排列</h6><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select * from score order by grade asc;
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> score </span><span class="token keyword">order</span><span class="token plain"> </span><span class="token keyword">by</span><span class="token plain"> grade </span><span class="token keyword">asc</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h6 id="97182-把学生的分数按降序排列"><a aria-hidden="true" href="#97182-把学生的分数按降序排列"><span class="icon icon-link"></span></a>9.7.1.8.2 把学生的分数按降序排列</h6><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select * from score order by grade desc;
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> score </span><span class="token keyword">order</span><span class="token plain"> </span><span class="token keyword">by</span><span class="token plain"> grade </span><span class="token keyword">desc</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h6 id="97183-课程编号按升序，成绩按降序"><a aria-hidden="true" href="#97183-课程编号按升序，成绩按降序"><span class="icon icon-link"></span></a>9.7.1.8.3 课程编号按升序，成绩按降序</h6><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select * from score order by course_id asc, grade desc;
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> score </span><span class="token keyword">order</span><span class="token plain"> </span><span class="token keyword">by</span><span class="token plain"> course_id </span><span class="token keyword">asc</span><span class="token punctuation">,</span><span class="token plain"> grade </span><span class="token keyword">desc</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="98-函数"><a aria-hidden="true" href="#98-函数"><span class="icon icon-link"></span></a>9.8 函数</h3><h4 id="981-字符函数"><a aria-hidden="true" href="#981-字符函数"><span class="icon icon-link"></span></a>9.8.1 字符函数</h4><table><thead><tr><th align="left">函数名称</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">CONCAT</td><td align="left">字符串连接</td></tr><tr><td align="left">CONCAT_WS</td><td align="left">使用指定的分隔符进行字符连接</td></tr><tr><td align="left">FORMAT</td><td align="left">数字格式化</td></tr><tr><td align="left">LOWER</td><td align="left">转小写字母</td></tr><tr><td align="left">UPPER</td><td align="left">转大写字母</td></tr><tr><td align="left">LEFT</td><td align="left">返回字符串s开始的最左边n个字符</td></tr><tr><td align="left">RIGHT</td><td align="left">返回字符串s开始的最左边n个字符</td></tr></tbody></table><h5 id="9811-length"><a aria-hidden="true" href="#9811-length"><span class="icon icon-link"></span></a>9.8.1.1 LENGTH</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT LENGTH(&#x27;zfpx&#x27;);
SELECT LENGTH(&#x27;珠峰培训&#x27;);
SHOW VARIABLES like &#x27;%char%&#x27;;
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> LENGTH</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> LENGTH</span><span class="token punctuation">(</span><span class="token string">&#x27;珠峰培训&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SHOW</span><span class="token plain"> VARIABLES </span><span class="token operator">like</span><span class="token plain"> </span><span class="token string">&#x27;%char%&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9812-拼接字符串-concat"><a aria-hidden="true" href="#9812-拼接字符串-concat"><span class="icon icon-link"></span></a>9.8.1.2 拼接字符串 [CONCAT]</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT CONCAT(last_name,&#x27;_&#x27;,first_name) FROM employees;
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> CONCAT</span><span class="token punctuation">(</span><span class="token plain">last_name</span><span class="token punctuation">,</span><span class="token string">&#x27;_&#x27;</span><span class="token punctuation">,</span><span class="token plain">first_name</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> employees</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9813-拼接字符串-upper"><a aria-hidden="true" href="#9813-拼接字符串-upper"><span class="icon icon-link"></span></a>9.8.1.3 拼接字符串 [UPPER]</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT UPPER(&#x27;zfpx&#x27;) FROM employees;
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> UPPER</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> employees</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9814-拼接字符串-lower"><a aria-hidden="true" href="#9814-拼接字符串-lower"><span class="icon icon-link"></span></a>9.8.1.4 拼接字符串 [LOWER]</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT LOWER(&#x27;ZFPX&#x27;) FROM employees;
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> LOWER</span><span class="token punctuation">(</span><span class="token string">&#x27;ZFPX&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> employees</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9815-截取字符串-substr"><a aria-hidden="true" href="#9815-截取字符串-substr"><span class="icon icon-link"></span></a>9.8.1.5 截取字符串 [SUBSTR]</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT SUBSTR(&#x27;zfpx&#x27;,2);-- 截取从指定索引处开始的所有的字符
SELECT SUBSTR(&#x27;zfpx&#x27;,2,3);--截取从指定索引处开始的指定数量的字符
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> SUBSTR</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 截取从指定索引处开始的所有的字符</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> SUBSTR</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--截取从指定索引处开始的指定数量的字符</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9816-姓名的首字符大写，其它字符小写然后用_拼接"><a aria-hidden="true" href="#9816-姓名的首字符大写，其它字符小写然后用_拼接"><span class="icon icon-link"></span></a>9.8.1.6 姓名的首字符大写，其它字符小写然后用_拼接</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text=" SELECT CONCAT(UPPER(SUBSTR(last_name,1,1)),&#x27;_&#x27;,LOWER(SUBSTR(last_name,2)));
" data-status="copy"></button><div class="token-line"><span class="token plain"> </span><span class="token keyword">SELECT</span><span class="token plain"> CONCAT</span><span class="token punctuation">(</span><span class="token plain">UPPER</span><span class="token punctuation">(</span><span class="token plain">SUBSTR</span><span class="token punctuation">(</span><span class="token plain">last_name</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#x27;_&#x27;</span><span class="token punctuation">,</span><span class="token plain">LOWER</span><span class="token punctuation">(</span><span class="token plain">SUBSTR</span><span class="token punctuation">(</span><span class="token plain">last_name</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9817-返回子串在原始字符串的起始索引"><a aria-hidden="true" href="#9817-返回子串在原始字符串的起始索引"><span class="icon icon-link"></span></a>9.8.1.7 返回子串在原始字符串的起始索引</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT INSTR(&#x27;zfpx&#x27;,&#x27;f&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> INSTR</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;f&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9818-去掉左右空格trim"><a aria-hidden="true" href="#9818-去掉左右空格trim"><span class="icon icon-link"></span></a>9.8.1.8 去掉左右空格[TRIM]</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT TRIM(&#x27;  zfpx  &#x27;);
SELECT LTRIM(&#x27;  zfpx  &#x27;);
SELECT RTRIM(&#x27;  zfpx  &#x27;);
SELECT TRIM(&#x27;x&#x27; FROM &#x27;xxzfpxxx&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> TRIM</span><span class="token punctuation">(</span><span class="token string">&#x27;  zfpx  &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> LTRIM</span><span class="token punctuation">(</span><span class="token string">&#x27;  zfpx  &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> RTRIM</span><span class="token punctuation">(</span><span class="token string">&#x27;  zfpx  &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> TRIM</span><span class="token punctuation">(</span><span class="token string">&#x27;x&#x27;</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> </span><span class="token string">&#x27;xxzfpxxx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9819-用空格补齐lpad"><a aria-hidden="true" href="#9819-用空格补齐lpad"><span class="icon icon-link"></span></a>9.8.1.9 用空格补齐[LPAD]</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT LPAD(&#x27;zfpx&#x27;,10,&#x27;@&#x27;);
SELECT LPAD(&#x27;1&#x27;,8,&#x27;0&#x27;);
SELECT RPAD(&#x27;1&#x27;,8,&#x27;0&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> LPAD</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#x27;@&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> LPAD</span><span class="token punctuation">(</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">&#x27;0&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> RPAD</span><span class="token punctuation">(</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">&#x27;0&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="98110-替换"><a aria-hidden="true" href="#98110-替换"><span class="icon icon-link"></span></a>9.8.1.10 替换</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT REPLACE(&#x27;zfpx&#x27;,&#x27;f&#x27;,&#x27;q&#x27;)
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;f&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;q&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="98111-format"><a aria-hidden="true" href="#98111-format"><span class="icon icon-link"></span></a>9.8.1.11 FORMAT</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT FORMAT(100000,2); 100,000.00
select format(100.31111,2) 100.31
select format(100.31111,0); 100
SELECT FORMAT(423423234.65534453,2); 423,423,234.66
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">FORMAT</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">000.00</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">select</span><span class="token plain"> </span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">100.31111</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token number">100.31</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">select</span><span class="token plain"> </span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">100.31111</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">FORMAT</span><span class="token punctuation">(</span><span class="token number">423423234.65534453</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token number">423</span><span class="token punctuation">,</span><span class="token number">423</span><span class="token punctuation">,</span><span class="token number">234.66</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="98112-left-right"><a aria-hidden="true" href="#98112-left-right"><span class="icon icon-link"></span></a>9.8.1.12 LEFT RIGHT</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select left(&#x27;abcde12345&#x27;,5);   //abcde
select left(&#x27;abcde12345&#x27;,5);   //12345
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token keyword">left</span><span class="token punctuation">(</span><span class="token string">&#x27;abcde12345&#x27;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">//abcde</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">select</span><span class="token plain"> </span><span class="token keyword">left</span><span class="token punctuation">(</span><span class="token string">&#x27;abcde12345&#x27;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">//12345</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="982-数学函数"><a aria-hidden="true" href="#982-数学函数"><span class="icon icon-link"></span></a>9.8.2 数学函数</h4><table><thead><tr><th align="left">函数名称</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">CEIL</td><td align="left">向上取整</td></tr><tr><td align="left">FLOOR</td><td align="left">向下取整数</td></tr><tr><td align="left">DIV</td><td align="left">整数取</td></tr><tr><td align="left">MOD</td><td align="left">取余(取模)</td></tr><tr><td align="left">POWER</td><td align="left">幂运算</td></tr><tr><td align="left">ROUND</td><td align="left">四舍五入</td></tr><tr><td align="left">TRUNCATE</td><td align="left">数字截取</td></tr></tbody></table><h5 id="9821-四舍五入"><a aria-hidden="true" href="#9821-四舍五入"><span class="icon icon-link"></span></a>9.8.2.1 四舍五入</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT ROUND(2.5);
SELECT ROUND(2.555,2);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">2.555</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9822-向上取整"><a aria-hidden="true" href="#9822-向上取整"><span class="icon icon-link"></span></a>9.8.2.2 向上取整</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT CEIL(1.00);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> CEIL</span><span class="token punctuation">(</span><span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9823-向下取整"><a aria-hidden="true" href="#9823-向下取整"><span class="icon icon-link"></span></a>9.8.2.3 向下取整</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT FLOOR(1.00);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> FLOOR</span><span class="token punctuation">(</span><span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9824-截断"><a aria-hidden="true" href="#9824-截断"><span class="icon icon-link"></span></a>9.8.2.4 截断</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT TRUNCATE(1.66,1);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">TRUNCATE</span><span class="token punctuation">(</span><span class="token number">1.66</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9825-取余"><a aria-hidden="true" href="#9825-取余"><span class="icon icon-link"></span></a>9.8.2.5 取余</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT mod(10,3);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="983-日期函数"><a aria-hidden="true" href="#983-日期函数"><span class="icon icon-link"></span></a>9.8.3 日期函数</h4><table><thead><tr><th align="left">函数名称</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">NOW</td><td align="left">当前日期和时间</td></tr><tr><td align="left">CURDATE</td><td align="left">当前日期</td></tr><tr><td align="left">CURTIME</td><td align="left">当前时间</td></tr><tr><td align="left">DATE_ADD</td><td align="left">日期变化</td></tr><tr><td align="left">DATEDIFF</td><td align="left">计算日期差</td></tr><tr><td align="left">DATE_FORMAT</td><td align="left">日期格式化</td></tr></tbody></table><h5 id="9831-返回日期时间"><a aria-hidden="true" href="#9831-返回日期时间"><span class="icon icon-link"></span></a>9.8.3.1 返回日期时间</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT NOW():
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">:</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9832-返回日期"><a aria-hidden="true" href="#9832-返回日期"><span class="icon icon-link"></span></a>9.8.3.2 返回日期</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT CURDATE():
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> CURDATE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">:</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9833-返回日期"><a aria-hidden="true" href="#9833-返回日期"><span class="icon icon-link"></span></a>9.8.3.3 返回日期</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT CURTIME():
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> CURTIME</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">:</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9834-返回日期中指定的部分"><a aria-hidden="true" href="#9834-返回日期中指定的部分"><span class="icon icon-link"></span></a>9.8.3.4 返回日期中指定的部分</h5><p>年 月 日 小时 分钟 秒</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT YEAR(NOW());
SELECT MONTH(NOW());
SELECT MONTHNAME(NOW());
SELECT DAY(NOW());
SELECT HOUR(NOW());
SELECT MINUTE(NOW());
SELECT SECOND(NOW());
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> MONTHNAME</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">DAY</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">HOUR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">MINUTE</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">SECOND</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9835-str_to_date"><a aria-hidden="true" href="#9835-str_to_date"><span class="icon icon-link"></span></a>9.8.3.5 str_to_date</h5><p>将日期格式的字符串转成指定格式的日期</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT STR_TO_DATE(&#x27;2018-09-09&#x27;,&#x27;%Y-%m-%d&#x27;)
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> STR_TO_DATE</span><span class="token punctuation">(</span><span class="token string">&#x27;2018-09-09&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;%Y-%m-%d&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><table><thead><tr><th align="left">序号</th><th align="left">格式符</th><th align="left">功能</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">%Y</td><td align="left">4位的年份</td></tr><tr><td align="left">2</td><td align="left">%y</td><td align="left">2位的年份</td></tr><tr><td align="left">3</td><td align="left">%m</td><td align="left">月份(01,02)</td></tr><tr><td align="left">4</td><td align="left">%c</td><td align="left">月份(1,2)</td></tr><tr><td align="left">5</td><td align="left">%d</td><td align="left">日(01,02)</td></tr><tr><td align="left">6</td><td align="left">%H</td><td align="left">小时(24小时制)</td></tr><tr><td align="left">7</td><td align="left">%h</td><td align="left">小时(12小时制)</td></tr><tr><td align="left">8</td><td align="left">%i</td><td align="left">分钟(00,01)</td></tr><tr><td align="left">9</td><td align="left">%s</td><td align="left">秒(00,01)</td></tr></tbody></table><h5 id="9836"><a aria-hidden="true" href="#9836"><span class="icon icon-link"></span></a>9.8.3.6</h5><p>查询入职日期为1984-8-4的员工信息</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT * FROM employees WHERE hiredate = STR_TO_DATE(&#x27;12-30 1984&#x27;,&#x27;%m-%d %Y&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> employees </span><span class="token keyword">WHERE</span><span class="token plain"> hiredate </span><span class="token operator">=</span><span class="token plain"> STR_TO_DATE</span><span class="token punctuation">(</span><span class="token string">&#x27;12-30 1984&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;%m-%d %Y&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9837-date_format"><a aria-hidden="true" href="#9837-date_format"><span class="icon icon-link"></span></a>9.8.3.7 DATE_FORMAT</h5><p>将日期转换成指定字符串</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT DATE_FORMAT(NOW(),&#x27;%Y年%m月%d日&#x27;)
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> DATE_FORMAT</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#x27;%Y年%m月%d日&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9838-date_add"><a aria-hidden="true" href="#9838-date_add"><span class="icon icon-link"></span></a>9.8.3.8 DATE_ADD</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT DATE_ADD(NOW(),INTERVAL 365 DAY);
SELECT DATE_ADD(NOW(),INTERVAL 1 MONTH);
SELECT DATE_ADD(NOW(),INTERVAL 1 YEAR);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span><span class="token plain"> </span><span class="token number">365</span><span class="token plain"> </span><span class="token keyword">DAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword">MONTH</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9839-datediff"><a aria-hidden="true" href="#9839-datediff"><span class="icon icon-link"></span></a>9.8.3.9 DATEDIFF</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT DATEDIFF(&#x27;2019-1-1&#x27;,NOW());
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> DATEDIFF</span><span class="token punctuation">(</span><span class="token string">&#x27;2019-1-1&#x27;</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="984-其它函数"><a aria-hidden="true" href="#984-其它函数"><span class="icon icon-link"></span></a>9.8.4 其它函数</h4><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT CONNECTION_ID();
SELECT DATABASE();
SELECT VERSION();
select LAST_INSERT_ID();
SELECT USER();

SELECT MD5(&#x27;123456&#x27;);//摘要算法
SELECT PASSWORD(&#x27;123456&#x27;);//修改当前用户的密码
SELECT User,Password from mysql.user;
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> CONNECTION_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> VERSION</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">select</span><span class="token plain"> LAST_INSERT_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> MD5</span><span class="token punctuation">(</span><span class="token string">&#x27;123456&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//摘要算法</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> PASSWORD</span><span class="token punctuation">(</span><span class="token string">&#x27;123456&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//修改当前用户的密码</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">User</span><span class="token punctuation">,</span><span class="token plain">Password </span><span class="token keyword">from</span><span class="token plain"> mysql</span><span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="985-流程控制函数"><a aria-hidden="true" href="#985-流程控制函数"><span class="icon icon-link"></span></a>9.8.5 流程控制函数</h4><h5 id="9851-if"><a aria-hidden="true" href="#9851-if"><span class="icon icon-link"></span></a>9.8.5.1 IF</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SELECT IF(1&gt;0,&#x27;A&#x27;,&#x27;B&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">SELECT</span><span class="token plain"> </span><span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&#x27;A&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;B&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h5 id="9852-case函数"><a aria-hidden="true" href="#9852-case函数"><span class="icon icon-link"></span></a>9.8.5.2 CASE函数</h5><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CASE 要判断的字段和表达式
WHEN 常量1 then 要显示的值或语句1
WHEN 常量2 then 要显示的值或语句2
ELSE 要显示的值
END
SELECT 
CASE 
WHEN grade&lt;60 then &#x27;不及格&#x27;
WHEN grade&gt;=60 then &#x27;及格&#x27;
ELSE &#x27;未知&#x27;
END
FROM score;
SELECT 
CASE level
WHEN &#x27;A&#x27; then &#x27;优秀&#x27;
WHEN &#x27;B&#x27; then &#x27;良好&#x27;
ELSE &#x27;未知&#x27;
END
FROM score;
" data-status="copy"></button><div class="token-line"><span class="token keyword">CASE</span><span class="token plain"> 要判断的字段和表达式</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHEN</span><span class="token plain"> 常量</span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"> 要显示的值或语句</span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHEN</span><span class="token plain"> 常量</span><span class="token number">2</span><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"> 要显示的值或语句</span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ELSE</span><span class="token plain"> 要显示的值</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">END</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CASE</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHEN</span><span class="token plain"> grade</span><span class="token operator">&lt;</span><span class="token number">60</span><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"> </span><span class="token string">&#x27;不及格&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHEN</span><span class="token plain"> grade</span><span class="token operator">&gt;=</span><span class="token number">60</span><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"> </span><span class="token string">&#x27;及格&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ELSE</span><span class="token plain"> </span><span class="token string">&#x27;未知&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">END</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> score</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CASE</span><span class="token plain"> </span><span class="token keyword">level</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHEN</span><span class="token plain"> </span><span class="token string">&#x27;A&#x27;</span><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"> </span><span class="token string">&#x27;优秀&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHEN</span><span class="token plain"> </span><span class="token string">&#x27;B&#x27;</span><span class="token plain"> </span><span class="token keyword">then</span><span class="token plain"> </span><span class="token string">&#x27;良好&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">ELSE</span><span class="token plain"> </span><span class="token string">&#x27;未知&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">END</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">FROM</span><span class="token plain"> score</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="99-自定义函数"><a aria-hidden="true" href="#99-自定义函数"><span class="icon icon-link"></span></a>9.9 自定义函数</h4><ul><li>自定义函数是对MySQL的扩展，使用方式和内置函数相同</li><li>函数必须要有参数和返回值</li><li>函数可以接收任意类型的值，也可以接收这些类型的参数</li><li>函数体由合法的SQL语句组成</li><li>函数体可以是简单的SELECT语句或INSERT语句，如果是复合结构要用BEGIN...END</li><li>函数体也可以包含声明，循环和流程控制</li><li>返回值只能有一个</li></ul><h4 id="991-语法"><a aria-hidden="true" href="#991-语法"><span class="icon icon-link"></span></a>9.9.1 语法</h4><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE FUNCTION func_name() RETURNS  VARCHAR(64)
body
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">FUNCTION</span><span class="token plain"> func_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">RETURNS</span><span class="token plain">  </span><span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">body</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="992-znow"><a aria-hidden="true" href="#992-znow"><span class="icon icon-link"></span></a>9.9.2 znow</h4><ul><li>注意函数名一定要跟着小括号表示参数</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE FUNCTION znow() RETURNS VARCHAR(30)
RETURN DATE_FORMAT(NOW(),&#x27;%Y年%m月%d日 %H点:%i分%s秒&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">FUNCTION</span><span class="token plain"> znow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">RETURNS</span><span class="token plain"> </span><span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">RETURN</span><span class="token plain"> DATE_FORMAT</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#x27;%Y年%m月%d日 %H点:%i分%s秒&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="993-zadd"><a aria-hidden="true" href="#993-zadd"><span class="icon icon-link"></span></a>9.9.3 zadd</h4><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE FUNCTION zadd(num1 INT,num2 INT) RETURNS INT
RETURN num1+num2;
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">FUNCTION</span><span class="token plain"> zadd</span><span class="token punctuation">(</span><span class="token plain">num1 </span><span class="token keyword">INT</span><span class="token punctuation">,</span><span class="token plain">num2 </span><span class="token keyword">INT</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">RETURNS</span><span class="token plain"> </span><span class="token keyword">INT</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">RETURN</span><span class="token plain"> num1</span><span class="token operator">+</span><span class="token plain">num2</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="994-adduser"><a aria-hidden="true" href="#994-adduser"><span class="icon icon-link"></span></a>9.9.4 addUser</h4><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE TABLE stu(id int PRIMARY KEY AUTO_INCREMENT,name VARCHAR(50));
CREATE FUNCTION addUser(name VARCHAR(50)) RETURNS INT
BEGIN
  INSERT INTO stu(name) VALUES(name);
  RETURN LAST_INSERT_ID();
END

SELECT addUser(&#x27;zfpx&#x27;);
DROP FUNCTION addUser
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> stu</span><span class="token punctuation">(</span><span class="token plain">id </span><span class="token keyword">int</span><span class="token plain"> </span><span class="token keyword">PRIMARY</span><span class="token plain"> </span><span class="token keyword">KEY</span><span class="token plain"> </span><span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span><span class="token plain">name </span><span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">FUNCTION</span><span class="token plain"> addUser</span><span class="token punctuation">(</span><span class="token plain">name </span><span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">RETURNS</span><span class="token plain"> </span><span class="token keyword">INT</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">BEGIN</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">INSERT</span><span class="token plain"> </span><span class="token keyword">INTO</span><span class="token plain"> stu</span><span class="token punctuation">(</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">RETURN</span><span class="token plain"> LAST_INSERT_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">END</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SELECT</span><span class="token plain"> addUser</span><span class="token punctuation">(</span><span class="token string">&#x27;zfpx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">DROP</span><span class="token plain"> </span><span class="token keyword">FUNCTION</span><span class="token plain"> addUser</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="910-模糊查询"><a aria-hidden="true" href="#910-模糊查询"><span class="icon icon-link"></span></a>9.10 模糊查询</h3><p>就是查询的条件是模糊的，不是特别明确的</p><h4 id="9101-通配符"><a aria-hidden="true" href="#9101-通配符"><span class="icon icon-link"></span></a>9.10.1 通配符</h4><p>代替一个或多个真正的字符，与LIKE 关键字一起使用</p><ul><li><code>_</code>表示一个任意字符</li><li><code>%</code>表示任意长度的字符串</li></ul><h4 id="9102-between-and"><a aria-hidden="true" href="#9102-between-and"><span class="icon icon-link"></span></a>9.10.2 BETWEEN AND</h4><p>查询某一列在指定的规范内的记录，包括两个边界</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select * from score where grade between 80 and 100
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> score </span><span class="token keyword">where</span><span class="token plain"> grade </span><span class="token operator">between</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">and</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="9103-in"><a aria-hidden="true" href="#9103-in"><span class="icon icon-link"></span></a>9.10.3 IN</h4><p>查询某一列中的值在列出的内容列表中</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="select * from student where city in (&#x27;北京&#x27;,&#x27;上海&#x27;,&#x27;广东&#x27;)
" data-status="copy"></button><div class="token-line"><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> student </span><span class="token keyword">where</span><span class="token plain"> city </span><span class="token operator">in</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;北京&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;上海&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;广东&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="9104-is-nul"><a aria-hidden="true" href="#9104-is-nul"><span class="icon icon-link"></span></a>9.10.4 IS NUL</h4><ul><li>查询没有邮箱的 IS NUL</li><li>查询有邮箱的 IS NOT NULL</li></ul><h2 id="10-dcl"><a aria-hidden="true" href="#10-dcl"><span class="icon icon-link"></span></a>10. DCL</h2><h3 id="101-创建用户"><a aria-hidden="true" href="#101-创建用户"><span class="icon icon-link"></span></a>10.1 创建用户</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE USER 用户名@访问地址 IDENTIFIED BY &#x27;密码&#x27;
CREATE USER user1@localhost IDENTIFIED BY &#x27;123456&#x27;
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">USER</span><span class="token plain"> 用户名@访问地址 IDENTIFIED </span><span class="token keyword">BY</span><span class="token plain"> </span><span class="token string">&#x27;密码&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">USER</span><span class="token plain"> user1</span><span class="token variable">@localhost</span><span class="token plain"> IDENTIFIED </span><span class="token keyword">BY</span><span class="token plain"> </span><span class="token string">&#x27;123456&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="102-授予权限"><a aria-hidden="true" href="#102-授予权限"><span class="icon icon-link"></span></a>10.2 授予权限</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="GRANT 权限1,权限2,,, ON 数据库.* TO 用户名

GRANT CREATE,DROP ON db1.* TO user1@localhost;
" data-status="copy"></button><div class="token-line"><span class="token keyword">GRANT</span><span class="token plain"> 权限</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain">权限</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">ON</span><span class="token plain"> 数据库</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">TO</span><span class="token plain"> 用户名</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">GRANT</span><span class="token plain"> </span><span class="token keyword">CREATE</span><span class="token punctuation">,</span><span class="token keyword">DROP</span><span class="token plain"> </span><span class="token keyword">ON</span><span class="token plain"> db1</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">TO</span><span class="token plain"> user1</span><span class="token variable">@localhost</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="103-授予权限"><a aria-hidden="true" href="#103-授予权限"><span class="icon icon-link"></span></a>10.3 授予权限</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="REVOKE 权限1，权限2，，，ON 数据库.* FROM 用户名;
REVOKE CREATE,DROP ONT db1.* FROM user1@localhost;
" data-status="copy"></button><div class="token-line"><span class="token keyword">REVOKE</span><span class="token plain"> 权限</span><span class="token number">1</span><span class="token plain">，权限</span><span class="token number">2</span><span class="token plain">，，，</span><span class="token keyword">ON</span><span class="token plain"> 数据库</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> 用户名</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">REVOKE</span><span class="token plain"> </span><span class="token keyword">CREATE</span><span class="token punctuation">,</span><span class="token keyword">DROP</span><span class="token plain"> ONT db1</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">FROM</span><span class="token plain"> user1</span><span class="token variable">@localhost</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="104-查看用户权限"><a aria-hidden="true" href="#104-查看用户权限"><span class="icon icon-link"></span></a>10.4 查看用户权限</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="SHOW GRANTS FROM 用户名
SHOW GRANTS FROM user1@localhost;
" data-status="copy"></button><div class="token-line"><span class="token keyword">SHOW</span><span class="token plain"> GRANTS </span><span class="token keyword">FROM</span><span class="token plain"> 用户名</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SHOW</span><span class="token plain"> GRANTS </span><span class="token keyword">FROM</span><span class="token plain"> user1</span><span class="token variable">@localhost</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="105-删除用户"><a aria-hidden="true" href="#105-删除用户"><span class="icon icon-link"></span></a>10.5 删除用户</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="DROP USER 用户名
DROP USER user1@localhost;
" data-status="copy"></button><div class="token-line"><span class="token keyword">DROP</span><span class="token plain"> </span><span class="token keyword">USER</span><span class="token plain"> 用户名</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">DROP</span><span class="token plain"> </span><span class="token keyword">USER</span><span class="token plain"> user1</span><span class="token variable">@localhost</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="106-修改密码"><a aria-hidden="true" href="#106-修改密码"><span class="icon icon-link"></span></a>10.6 修改密码</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="UPDATE USER SET PASSWORD=PASSWORD(&#x27;password&#x27;) WHERE User=&#x27;username&#x27; and Host=&#x27;localhost&#x27;;
FLUSH PRIVILEGES;
" data-status="copy"></button><div class="token-line"><span class="token keyword">UPDATE</span><span class="token plain"> </span><span class="token keyword">USER</span><span class="token plain"> </span><span class="token keyword">SET</span><span class="token plain"> PASSWORD</span><span class="token operator">=</span><span class="token plain">PASSWORD</span><span class="token punctuation">(</span><span class="token string">&#x27;password&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">WHERE</span><span class="token plain"> </span><span class="token keyword">User</span><span class="token operator">=</span><span class="token string">&#x27;username&#x27;</span><span class="token plain"> </span><span class="token operator">and</span><span class="token plain"> Host</span><span class="token operator">=</span><span class="token string">&#x27;localhost&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">FLUSH </span><span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="11-存储过程"><a aria-hidden="true" href="#11-存储过程"><span class="icon icon-link"></span></a>11. 存储过程</h2><ul><li>大多数SQL语句都是针对一个或多个表的单条语句。但是并不是所有的操作都是可以用一条语句来完成的，经常有一些操作是需要多条语句配合才能完成。我们引入的存储过程（Stored Procedure）是一组为了完成特定功能的SQL语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给定参数（如果该存储过程带有参数）来调用执行它</li></ul><h3 id="111-语法"><a aria-hidden="true" href="#111-语法"><span class="icon icon-link"></span></a>11.1 语法</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CREATE PROCEDURE([[IN |OUT |INOUT ] 参数名 数据类形...])
" data-status="copy"></button><div class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">PROCEDURE</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">IN</span><span class="token plain"> </span><span class="token operator">|</span><span class="token keyword">OUT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token keyword">INOUT</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"> 参数名 数据类形</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="112-调用"><a aria-hidden="true" href="#112-调用"><span class="icon icon-link"></span></a>11.2 调用</h3><ul><li>因为存储过程实际上是一种函数,所以存储过程名后需要有 () 符号(即使不传递参数也需要)</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="CALL Avg_Price()
" data-status="copy"></button><div class="token-line"><span class="token keyword">CALL</span><span class="token plain"> Avg_Price</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="113-删除"><a aria-hidden="true" href="#113-删除"><span class="icon icon-link"></span></a>11.3 删除</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="DROP PROCEDURE IF EXISTS Avg_Price;
" data-status="copy"></button><div class="token-line"><span class="token keyword">DROP</span><span class="token plain"> </span><span class="token keyword">PROCEDURE</span><span class="token plain"> </span><span class="token keyword">IF</span><span class="token plain"> </span><span class="token keyword">EXISTS</span><span class="token plain"> Avg_Price</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="114-参数"><a aria-hidden="true" href="#114-参数"><span class="icon icon-link"></span></a>11.4 参数</h3><ul><li>存储过程并不显示结果，而是把结果返回给你指定的变量</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="create procedure sum (in a int,in b int,out result int)
begin
select a+b INTO result;
end

call sum5(1,2,@result);
select @result;
" data-status="copy"></button><div class="token-line"><span class="token keyword">create</span><span class="token plain"> </span><span class="token keyword">procedure</span><span class="token plain"> </span><span class="token function">sum</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">in</span><span class="token plain"> a </span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token operator">in</span><span class="token plain"> b </span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">out</span><span class="token plain"> result </span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">begin</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">select</span><span class="token plain"> a</span><span class="token operator">+</span><span class="token plain">b </span><span class="token keyword">INTO</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">end</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">call</span><span class="token plain"> sum5</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token variable">@result</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">select</span><span class="token plain"> </span><span class="token variable">@result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="12-索引"><a aria-hidden="true" href="#12-索引"><span class="icon icon-link"></span></a>12. 索引</h2><ul><li>索引可以提高数据库的查询速度</li></ul><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-034643.jpg" alt="treeindex"/></p><h3 id="121-准备数据"><a aria-hidden="true" href="#121-准备数据"><span class="icon icon-link"></span></a>12.1 准备数据</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="-- 构建一个8388608条记录的数据 

-- 创建用户表
create table user(
  id int,
    username varchar(64),
    userno int
)

-- 创建生成随机字符串的函数
CREATE FUNCTION `rand_string`(n INT) RETURNS varchar(255)
BEGIN 
DECLARE chars_str varchar(100) DEFAULT &#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#x27;; 
DECLARE return_str varchar(255) DEFAULT &#x27;&#x27;; 
DECLARE i INT DEFAULT 0; 
WHILE i &lt; n DO 
SET return_str = concat(return_str,substring(chars_str , FLOOR(1 + RAND()*62 ),1)); 
SET i = i +1; 
END WHILE; 
RETURN return_str; 
END; 


-- 产生随机数字 
create function rand_num() 
returns int(5) 
begin  
declare i int default 0; 
set i = floor(10+rand()*500); 
return i; 
end

-- 创建存储过程，向用户表添加海量数据 

create procedure insert_user(in start int(10),in max_num int(10))
 begin
   declare i int;
   set i=0;
   while i&lt;max_num do
     set i=i+1;
         insert into user(id,username,userno) values((start+i),rand_string(6),rand_num());
   end while;
 end;
call insert_user(1,8388608);
" data-status="copy"></button><div class="token-line"><span class="token comment">-- 构建一个8388608条记录的数据 </span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 创建用户表</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">create</span><span class="token plain"> </span><span class="token keyword">table</span><span class="token plain"> </span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  id </span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    username </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    userno </span><span class="token keyword">int</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 创建生成随机字符串的函数</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">FUNCTION</span><span class="token plain"> </span><span class="token punctuation">`</span><span class="token plain">rand_string</span><span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token plain">n </span><span class="token keyword">INT</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">RETURNS</span><span class="token plain"> </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">BEGIN</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">DECLARE</span><span class="token plain"> chars_str </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#x27;</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">DECLARE</span><span class="token plain"> return_str </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">DECLARE</span><span class="token plain"> i </span><span class="token keyword">INT</span><span class="token plain"> </span><span class="token keyword">DEFAULT</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">WHILE</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> n </span><span class="token keyword">DO</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SET</span><span class="token plain"> return_str </span><span class="token operator">=</span><span class="token plain"> concat</span><span class="token punctuation">(</span><span class="token plain">return_str</span><span class="token punctuation">,</span><span class="token plain">substring</span><span class="token punctuation">(</span><span class="token plain">chars_str </span><span class="token punctuation">,</span><span class="token plain"> FLOOR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> RAND</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">62</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">SET</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> i </span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">END</span><span class="token plain"> </span><span class="token keyword">WHILE</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">RETURN</span><span class="token plain"> return_str</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">END</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 产生随机数字 </span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">create</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> rand_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">returns</span><span class="token plain"> </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">begin</span><span class="token plain">  </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">declare</span><span class="token plain"> i </span><span class="token keyword">int</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">set</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> floor</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">+</span><span class="token plain">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">return</span><span class="token plain"> i</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">end</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">-- 创建存储过程，向用户表添加海量数据 </span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">create</span><span class="token plain"> </span><span class="token keyword">procedure</span><span class="token plain"> insert_user</span><span class="token punctuation">(</span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword">start</span><span class="token plain"> </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">in</span><span class="token plain"> max_num </span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">begin</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword">declare</span><span class="token plain"> i </span><span class="token keyword">int</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword">set</span><span class="token plain"> i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword">while</span><span class="token plain"> i</span><span class="token operator">&lt;</span><span class="token plain">max_num </span><span class="token keyword">do</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     </span><span class="token keyword">set</span><span class="token plain"> i</span><span class="token operator">=</span><span class="token plain">i</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">         </span><span class="token keyword">insert</span><span class="token plain"> </span><span class="token keyword">into</span><span class="token plain"> </span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token plain">id</span><span class="token punctuation">,</span><span class="token plain">username</span><span class="token punctuation">,</span><span class="token plain">userno</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">start</span><span class="token operator">+</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain">rand_string</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain">rand_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword">end</span><span class="token plain"> </span><span class="token keyword">while</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword">end</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">call</span><span class="token plain"> insert_user</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8388608</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="122-创建普通索引"><a aria-hidden="true" href="#122-创建普通索引"><span class="icon icon-link"></span></a>12.2 创建普通索引</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="create table user(id int primary key,name varchar(32),email varchar(32));
alter table user add index(name);
create index idx_name on  user(name);
" data-status="copy"></button><div class="token-line"><span class="token keyword">create</span><span class="token plain"> </span><span class="token keyword">table</span><span class="token plain"> </span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token plain">id </span><span class="token keyword">int</span><span class="token plain"> </span><span class="token keyword">primary</span><span class="token plain"> </span><span class="token keyword">key</span><span class="token punctuation">,</span><span class="token plain">name </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain">email </span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">alter</span><span class="token plain"> </span><span class="token keyword">table</span><span class="token plain"> </span><span class="token keyword">user</span><span class="token plain"> </span><span class="token keyword">add</span><span class="token plain"> </span><span class="token keyword">index</span><span class="token punctuation">(</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">create</span><span class="token plain"> </span><span class="token keyword">index</span><span class="token plain"> idx_name </span><span class="token keyword">on</span><span class="token plain">  </span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="123-查看索引"><a aria-hidden="true" href="#123-查看索引"><span class="icon icon-link"></span></a>12.3 查看索引</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="show index from 表名;
show index from user
" data-status="copy"></button><div class="token-line"><span class="token keyword">show</span><span class="token plain"> </span><span class="token keyword">index</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> 表名</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">show</span><span class="token plain"> </span><span class="token keyword">index</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token keyword">user</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="124-删除索引"><a aria-hidden="true" href="#124-删除索引"><span class="icon icon-link"></span></a>12.4 删除索引</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="alter table 表名 drop primary;
alter table 表名 drop index 索引名;
drop index 索引名 on 表名;
" data-status="copy"></button><div class="token-line"><span class="token keyword">alter</span><span class="token plain"> </span><span class="token keyword">table</span><span class="token plain"> 表名 </span><span class="token keyword">drop</span><span class="token plain"> </span><span class="token keyword">primary</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">alter</span><span class="token plain"> </span><span class="token keyword">table</span><span class="token plain"> 表名 </span><span class="token keyword">drop</span><span class="token plain"> </span><span class="token keyword">index</span><span class="token plain"> 索引名</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">drop</span><span class="token plain"> </span><span class="token keyword">index</span><span class="token plain"> 索引名 </span><span class="token keyword">on</span><span class="token plain"> 表名</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="125-慢查询"><a aria-hidden="true" href="#125-慢查询"><span class="icon icon-link"></span></a>12.5 慢查询</h3><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="explain
select * from users where userno=4593;
alter table users add index(userno);
" data-status="copy"></button><div class="token-line"><span class="token keyword">explain</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> users </span><span class="token keyword">where</span><span class="token plain"> userno</span><span class="token operator">=</span><span class="token number">4593</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">alter</span><span class="token plain"> </span><span class="token keyword">table</span><span class="token plain"> users </span><span class="token keyword">add</span><span class="token plain"> </span><span class="token keyword">index</span><span class="token punctuation">(</span><span class="token plain">userno</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><img src="https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-01-034733.jpg" alt="mysqlexplain"/></p><h3 id="126-索引创建的原则"><a aria-hidden="true" href="#126-索引创建的原则"><span class="icon icon-link"></span></a>12.6 索引创建的原则</h3><ul><li>比较频繁作为查询条件的字段应该创建索引</li><li>唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件</li><li>更新非常频繁的字段不适合作创建索引</li><li>不会出现在where子句中的字段不该创建索引</li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/weisuoke/mysql-guidebook/edit/master/docs/draft/basic1.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">2020-10-1 12:09:14</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/umi.js"></script>
    <script src="/docs__draft__basic1.md.js"></script>
  </body>
</html>
